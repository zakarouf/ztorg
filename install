#!/bin/bash

CCF=clang
CFLAGS='-Wall -std=c99 -O2 -static'
LDFLAGS='-lncurses -lm'
ZENGINE='./zse/*.c'

OUTEX_FILE='z'

tar -xf data.tar

# Covert C files to .o files
$CCF $CFLAGS $LDFLAGS -c $ZENGINE *.c

# Compile programme
$CCF $CFLAGS $LDFLAGS -o $OUTEX_FILE *.o

# Move exectable to its rightful place.
mv $OUTEX_FILE data/
# Remove .o files
rm *.o


if [[ $1 == "-run" ]]; then
	cd data
	./$OUTEX_FILE
	cd ..
fi


if [[ $1 == "-test" ]]; then
	rm -rf data
fi
